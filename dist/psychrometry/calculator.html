<!DOCTYPE html>
<html lang="en">
	
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width">
	<title>Psychrometric Software</title>

	<link href="../css/common.css" rel="stylesheet">
	
	<script src="../lib/dom/div_copydel.js" defer></script>
	<script src="../lib/dom/div_transientpopwnd.js" defer></script>
	<style>
		table{
			margin-left: 10px;
			float: left;
			width: 50%;
		}
		td{
			padding-top: 6px;
			padding-bottom: 6px;
		}

		tr:nth-child(2n+2){
			background-color: antiquewhite;
		}

		tr:nth-child(2n+1){
			background-color: blanchedalmond;
		}

		td:nth-child(1)
		{
			font-weight: bold;
			max-width: 2em;
		}

		input[type=text]{
			width: 90%;
		}

		input[type=text]:focus {
			outline: 3px solid #FFCC00;
			box-shadow: 0 0 10px #FFCC00;
		}

		#info{
			float: left;
			margin-left: 12px;
			padding-top: 12px;
			border-style: dashed;
			border-color: green;
			border-width: 1px;
			font-size: medium;
			display: none;
		}

		div.usage
		{
			border: 2px dotted green; 
			background-color: floralwhite;
			width: fit-content;
		}

		summary{
			cursor: pointer;
			width: fit-content;
		}

		summary:hover{
			background-color: burlywood;
		}

		@media only screen and (max-width:600px)
		{
			table{
				width: 80%;
			}
		}

	</style>
</head>

<body>


<script src="../mainmenu.js"></script>


<div id="maincontent">
	
<h1>Psychrometric Calculator</h1>

<details>
<summary>Usage</summary>
<div class="usage">
	<ol>
		<li>Make <b>exactly</b> 3 selections,</li>
		<li>Enter the corresponding numeric values,</li>
		<li>Click on compute,</li>
		<li>Results will appear at the bottom.</li>
	</ol>
</div>
</details>

<br>

<table id="inputtable">
<tr>
	<td>
		<input type="checkbox" id="chkP">
		<label for="chkP">P: </label>
	</td>
	<td>
		<input type="text" id="txtP" placeholder="Pressure (kPa)">
	</td>
</tr>
<tr>
	<td>
		<input type="checkbox" id="chkTdb">
		<label for="chkTdb">T<sub>db</sub>: </label>
	</td>
	<td>
		<input type="text" id="txtTdb" placeholder="Dry-bulb temperature (°C)">
	</td>
</tr>

<tr>
	<td>
		<input type="checkbox" id="chkTwb">
		<label for="chkTwb">T<sub>wb</sub>: </label>
	</td>
	<td>
		<input type="text" id="txtTwb" placeholder="Wet-bulb temperature(°C)">	
	</td>
</tr>

<tr>
	<td>
		<input type="checkbox" id="chkTdp">
		<label for="chkTdp">T<sub>dp</sub>:</label>
	</td>
	<td>
		<input type="text" id="txtTdp" placeholder="Dew-point temperature(°C)">	
	</td>
</tr>

<tr>
	<td>
		<input type="checkbox" id="chkW">
		<label for="chkW">W:</label>
	</td>
	<td>
		<input type="text" id="txtW" placeholder="Absolute humidity (kg/kg da)">	
	</td>
</tr>


<tr>
	<td>
		<input type="checkbox" id="chkRH">
		<label for="chkRH">RH:</label>
	</td>
	<td>
		<input type="text" id="txtRH" placeholder="Relative humidity (%)">	
	</td>
</tr>

<tr>
	<td>
		<input type="checkbox" id="chkH">
		<label for="chkH">H:</label>
	</td>
	<td>
		<input type="text" id="txtH" placeholder="Enthalpy (kJ / kg da)">	
	</td>
</tr>

<tr>
	<td>
		<input type="checkbox" id="chkV">
		<label for="chkV">V:</label>
	</td>
	<td>
		<input type="text" id="txtV" placeholder="V (m3 / kg da)">	
	</td>
</tr>

<tr>
	<td colspan="2" style="text-align: center; padding-top: 12px;">
		<label style="float: left;" for="digits">Digits:</label>
		<input style="width: 3em; float: left;" type="number" value="3" min="1" max="6" id="txtDigits">
		
		<button id="compute" type="button" disabled>Compute</button>
	</td>
</tr>
	
</table>

<div id="info"></div>

<div style="clear: both;">
	<a href="#" id="chartbtn">Psychrometric chart</a>
	<script>
		const chartBtn = document.getElementById('chartbtn');
		let options = {pythonPath: localStorage.getItem("pypath")};
		chartBtn.onclick = async function(evt)
		{
			let cmd = 
`
import scisuit.plot as plt
plt.psychrometry()
plt.show(maximize=True)
`			
			try{
				let output = await window.api.runpython(cmd, options, true);
				return false;
			}
			catch(e)
			{
				let msgBox = document.createElement("div-transientpopwnd");
				msgBox.timeout = 3500;
				msgBox.innerHTML = e;
				document.body.appendChild(msgBox);
			}
			
		}
	</script>
</div>


<script src="psycalc.js"></script>


</div>

</body>
</html>
