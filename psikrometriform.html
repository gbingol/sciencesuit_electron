<!DOCTYPE html>
<html>
	
<head>
	<meta charset="UTF-8" />
	<title>Psychrometric Software</title>
	<style>

		td{
			padding-top: 6px;
			padding-bottom: 6px;
		}

		tr:nth-child(2n+2){
			background-color: antiquewhite;
		}

		tr:nth-child(2n+1){
			background-color: blanchedalmond;
		}

		td:nth-child(2)
		{
			width: 90%;
		}
	</style>
</head>

<body>

	
<h1>Psychrometric Calculator</h1>


<table>
<tr>
	<td>
		<input type="checkbox" id="chkP" name="chkP">
		<label for="chkP">P: </label>
	</td>
	<td>
		<input type="number" value="" id="txtP" name="txtP" placeholder="Pressure (kPa)" step="0.1" min="0.0">
	</td>
</tr>
<tr>
	<td>
		<input type="checkbox" id="chkTdb" name="chkTdb">
		<label for="chkTdb">T<sub>db</sub>: </label>
	</td>
	<td>
		<input type="number" value="" id="txtTdb" name="txtTdb" placeholder="Dry-bulb temperature (°C)" step="0.001">
	</td>
</tr>

<tr>
	<td>
		<input type="checkbox" id="chkTwb" name="chkTwb">
		<label for="chkTwb">T<sub>wb</sub>: </label>
	</td>
	<td>
		<input type="number" value="" id="txtTwb" name="txtTwb" placeholder="Wet-bulb temperature(°C)" step="0.001">	
	</td>
</tr>

<tr>
	<td>
		<input type="checkbox" id="chkTdp" name="chkTdp">
		<label for="chkTdp">T<sub>dp</sub>:</label>
	</td>
	<td>
		<input type="number" id="txtTdp" name="txtTdp" placeholder="Dew-point temperature(°C)" step="0.001">	
	</td>
</tr>

<tr>
	<td>
		<input type="checkbox" id="chkW" name="chkW">
		<label for="chkW">W:</label>
	</td>
	<td>
		<input type="number" 
		id="txtW" name="txtW" 
		placeholder="Absolute humidity (kg/kg da)" step="0.00001"
		min="0.0" max="1.0">	
	</td>
</tr>


<tr>
	<td>
		<input type="checkbox" id="chkRH" name="chkRH">
		<label for="chkRH">RH:</label>
	</td>
	<td>
		<input type="number" 
		id="txtRH" name="txtRH" 
		placeholder="Relative humidity" step="0.01"
		min="0.0" max="100.0">	
	</td>
</tr>

<tr>
	<td>
		<input type="checkbox" id="chkH" name="chkH">
		<label for="chkH">H:</label>
	</td>
	<td>
		<input type="number" 
		id="txtH" name="txtH" 
		placeholder="Enthalpy (kJ / kg da)" step="0.01"
		min="0.0">	
	</td>
</tr>

<tr>
	<td>
		<input type="checkbox" id="chkV" name="chkV">
		<label for="chkV">V:</label>
	</td>
	<td>
		<input type="number" 
		id="txtV" name="txtV" 
		placeholder="V (m3 / kg da)" step="0.00001"
		min="0.0">	
	</td>
</tr>

<tr>
	<td colspan="2" style="text-align: center; padding-top: 12px;">
		<button id="compute" type="button">Compute</button>
	</td>
</tr>
	
</table>


<div id="modules"></div>

<script>
	const btn = document.getElementById('compute');
	const chkP =  document.getElementById('chkP');
	const chkTdb =  document.getElementById('chkTdb');
	const chkTwb =  document.getElementById('chkTwb');
	const chkTdp =  document.getElementById('chkTdp');
	const chkW =  document.getElementById('chkW');
	const chkRH =  document.getElementById('chkRH');
	const chkH =  document.getElementById('chkH');
	const chkV =  document.getElementById('chkV');

	const txtP =  document.getElementById('txtP');
	const txtTdb =  document.getElementById('txtTdb');
	const txtTwb =  document.getElementById('txtTwb');
	const txtTdp =  document.getElementById('txtTdp');
	const txtW =  document.getElementById('txtW');
	const txtRH =  document.getElementById('txtRH');
	const txtH =  document.getElementById('txtH');
	const txtV =  document.getElementById('txtV');

	const elems = [
		["P", chkP, txtP],
		["Tdb", chkTdb, txtTdb], ["Twb", chkTwb, txtTwb], ["Tdp", chkTdp, txtTdp],
		["W", chkW, txtW], ["RH", chkRH, txtRH],
		["H", chkH, txtH],
		["V", chkV, txtV]
	]

	btn.addEventListener("click", (evt) => 
	{
		let s = "";
		for(let i=0; i<elems.length; ++i)
		{
			let lbl = elems[i][0];
			let chk = elems[i][1];
			let txt = elems[i][2];
			if(chk.checked) 
			{
				s += lbl +"|" + txt.value;
				s += "|"
			}
		}

		//remove last comma
		s = s.slice(0, -1);
		
		window.electron.runpy((error, output) => 
		{
			if (error) 
			{
				console.error('Error:', error);
			} else 
			{
				let prg = document.getElementById("modules");
				prg.innerHTML = output
			}
		}, "py/psychrometry.py " + s);
	});
</script>
</body>
</html>
